{% extends 'master_page_nonlogged.html' %}
{% block content %}


    <div class="center-block container row scape-top-custom  text-center">

        <div class="col-md-1 top-separator-custom"></div>
        <div class="col-md-10 top-separator-custom">
            <br>
            <h5 class="text-darkorange">Featured</h5>


            <div id="carousel-example-generic" class="carousel-whitelg-custom carousel slide" data-ride="carousel">
                <!-- Indicators -->
                <!-- Wrapper for slides -->
                {% if featured.count > 0 %}
                    {% for activity in featured %}
                        {% if forloop.counter <= 3 %}
                            <div class="carousel-inner">
                                {% if forloop.counter > 1 %}

                                    <div class="item" data-src="{{ MEDIA_URL }}{{ activity.photo }}">
                                        <a href="{% url 'activity_info' activity_id=activity.id %}"><img class="carousel-img-custom"
                                                        src="{{ MEDIA_URL }}{{ activity.photo }}"></a>

                                        <p class="h5 text-center">{{ activity.name }}</p>

                                        <div class="h6 caption text-center">
                                            {{ activity.location }}
                                        </div>

                                    </div>

                                {% else %}
                                    <div class="item active" data-src="{{ MEDIA_URL }}{{ activity.photo }}">
                                        <a href="{% url 'activity_info' activity_id=activity.id %}"><img
                                                class="carousel-img-custom"
                                                src="{{ MEDIA_URL }}{{ activity.photo }}"></a>

                                        <p class="h5 text-center">{{ activity.name }}</p>

                                        <div class="h6 caption text-center">
                                            {{ activity.location }}
                                        </div>
                                    </div>
                                {% endif %}

                            </div>
                        {% endif %}
                    {% endfor %}
                    </div>
                {% endif %}

            <!-- Controls -->
            <a class="pull-left left overlap-carousel-leftcontrollg-custom " href="#carousel-example-generic"
               data-slide="prev">
                <span class="glyphicon text-darkorange glyphicon-chevron-left"></span>
            </a>
            <a class="pull-right right overlap-carousel-rightcontrollg-custom" href="#carousel-example-generic"
               data-slide="next">
                <span class="glyphicon text-darkorange glyphicon-chevron-right"></span>
            </a>
        </div>


    </div>






    <div class=" text-center  container" style="margin-bottom: 2%;">
        <div class="hidden text-center alert alert-warning">
            <p>Don't you like what you see?</p>

            <p>Which kind of plan of shall we offer you?</p>
            <br>

            <button type="button" class="btn btn-primary">Bar</button>
            <button type="button" class="btn btn-danger">Love</button>
            <button type="button" class="btn btn-default">Children</button>
            <button type="button" class="btn btn-warning">Sightseeing</button>
            <button type="button" class="btn btn-success">Party</button>
            <button type="button" class="btn btn-info">Mix</button>


        </div>


        <div class="row  container ">
            <div class=" col-lg-12 alert alert-success text-center">
                <p>Hey! What about that plan!?</p>
                <a href="{% url 'plan_info' activity_id=ac1.id activity_id2=ac2.id activity_id3=ac3.id %}">
                    <button type="button" class="btn btn-warning">I want this plan</button>
                </a>
                <a href="../filter" class="btn btn-info" data-toggle="modal">Try a custom search</a>
            </div>

            {% if activities.count > 0 %}

                {% for activity in activities %}

                    {% if forloop.counter <= 3 %}
                        <div class="col-sm-6 col-md-4">
                            <button id="cross" type="button" class="close div-card-plan-quit" data-dismiss="alert"
                                    aria-hidden="true">
                                <strong>&times</strong>
                            </button>

                            <div id="thumb{{ forloop.counter }}" class="thumbnail div-card-plan-thumbnail"
                                 style="background-image:url('{{ MEDIA_URL }}{{ activity.photo }}')">

                                <div id="info{{ forloop.counter }}" style="display: none"
                                     class="well div-card-plan-info">
                                    {{ activity.description }}
                                </div>


                            </div>


                            <div class="text-center panel div-card-plan-actiname">
                                <h4>{{ activity.name }}</h4>
                            </div>
                            <a class="btn btn-success" href="{% url 'activity_info' activity_id=activity.id %}">info</a>

                        </div>
                    {% endif %}
                {% endfor %}
            {% endif %}

        </div>


        <div id="map-canvas" class=" google-map-canvas center-block">
        </div>
        <style type="text/css">


            #map-canvas {
                height: 30%;
                width: 30%;

            }

            #map-canvas:hover {
                box-shadow: inset 0 1px 1px orange, 0 0 8px orange;
                -moz-box-shadow: inset 0 1px 1px orange, 0 0 8px orange;
                webkit-box-shadow: inset 0 1px 1px orange, 0 0 8px orange;

            }
        </style>
        <script type="text/javascript"
                src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDXn3jBP_WNPRZl--vp_ycQfqbX-WJFn0U&sensor=false">
        </script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js">
        </script>
        <script type="text/javascript">


            $("#alertbye").addClass("in").fadeOut(3500);

            $("#thumb1").hover(function () {
                $("#info1").css("display", "block");
            }, function () {
                $("#info1").css("display", "none");
            });

            $("#thumb2").hover(function () {
                $("#info2").css("display", "block");
            }, function () {
                $("#info2").css("display", "none");
            });

            $("#thumb3").hover(function () {
                $("#info3").css("display", "block");
            }, function () {
                $("#info3").css("display", "none");
            });


            // calculate route

            var directionsDisplay;
            var directionsService = new google.maps.DirectionsService();
            var map;

            function initialize() {
                directionsDisplay = new google.maps.DirectionsRenderer();
                var seville = new google.maps.LatLng(37.392012, -5.983726);
                var mapOptions = {
                    zoom: 7,
                    center: seville
                }
                map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
                directionsDisplay.setMap(map);
                calcRoute('{{ac1.latitude}}', '{{ac1.longitude}}', '{{ac2.latitude}}', '{{ac2.longitude}}', '{{ac3.latitude}}', '{{ac3.longitude}}')

            }

            function calcRoute(lat1, lon1, lat2, lon2, lat3, lon3) {
                //var start = new google.maps.LatLng(37.334481,-5.931160);
                //var end = new google.maps.LatLng(37.338678, -5.935896);

                // parsing variables to fix semicolon problem
                var lat1r = lat1.replace(",", ".");
                var lon1r = lon1.replace(",", ".");
                var lat2r = lat2.replace(",", ".");
                var lon2r = lon2.replace(",", ".");
                var lat3r = lat3.replace(",", ".");
                var lon3r = lon3.replace(",", ".");

                // end parsing

                var start = new google.maps.LatLng(lat1r, lon1r);
                var wp1 = new google.maps.LatLng(lat2r, lon2r);
                var end = new google.maps.LatLng(lat3r, lon3r);
                var wps = [
                    {location: wp1}
                ];
                var request = {
                    origin: start,
                    destination: end,
                    waypoints: wps,
                    travelMode: google.maps.TravelMode.DRIVING
                };

                directionsService.route(request, function (result, status) {
                    if (status == google.maps.DirectionsStatus.OK) {
                        directionsDisplay.setDirections(result);
                    }
                });
            }

            google.maps.event.addDomListener(window, 'load', initialize);

            {{forloop.counter}}
        </script>


    </div>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
{% endblock %}



